class t{static deepExtend(n,...e){if(!n)return{};for(const o of e)if(o)for(const[e,i]of Object.entries(o))switch(Object.prototype.toString.call(i)){case"[object Object]":n[e]=n[e]||{},n[e]=t.deepExtend(n[e],i);break;case"[object Array]":n[e]=t.deepExtend(new Array(i.length),i);break;default:n[e]=i}return n}static ready(t){"loading"!==document.readyState?t():document.addEventListener("DOMContentLoaded",t)}}const n={default:"",small:"modal-sm",large:"modal-lg",xlarge:"modal-xl"},e={primary:"text-bg-primary",secondary:"text-bg-secondary",success:"text-bg-success",info:"text-bg-info",warning:"text-bg-warning",danger:"text-bg-danger",light:"text-bg-light",dark:"text-bg-dark"},o={primary:"btn-primary",secondary:"btn-secondary",success:"btn-success",info:"btn-info",warning:"btn-warning",danger:"btn-danger",light:"btn-light",dark:"btn-dark"},i={title:"",color:o.dark,icon:"",onClick:t=>t.close()};class r{#t=new DOMParser;#n={size:n.default,color:e.dark,title:"&nbsp",content:"&nbsp",closeButton:!0,closeClick:!1,closeEscape:!1,displayHeader:!0,displayContent:!0,displayFooter:!0,actions:[],onOpening:t=>{},onOpened:t=>{},onClosing:t=>{},onClosed:t=>{}};#e=null;#o=null;constructor(n={}){this.#n=t.deepExtend(this.#n,n),this.#n.onOpening(this);const e=this.#i(),o=this.#r(),i=this.#s();this.#e=this.#l(e,o,i),document.body.append(this.#e),this.#o=new bootstrap.Modal(this.#e.querySelector(".modal"),{backdrop:!!this.#n.closeClick||"static",keyboard:this.#n.closeEscape}),this.#o.show(),this.#n.onOpened(this)}static confirm(t,n="Confirm",i=e.warning,s=[{title:"No",color:o.danger,icon:"fa-solid fa-xmark fa-fw",onClick:t=>t.close()},{title:"Yes",color:o.success,icon:"fa-solid fa-check fa-fw",onClick:t=>t.close()}]){return new r({title:n,content:t,color:i,actions:s})}static danger(t,n="Important"){return new r({title:n,content:t,color:e.danger,actions:[{title:"Close",color:o.danger,icon:"fa-solid fa-xmark fa-fw",onClick:t=>t.close()}]})}static dark(t,n="Important"){return new r({title:n,content:t,color:e.dark,actions:[{title:"Close",color:o.dark,icon:"fa-solid fa-xmark fa-fw",onClick:t=>t.close()}]})}static info(t,n="Important"){return new r({title:n,content:t,color:e.info,actions:[{title:"Close",color:o.info,icon:"fa-solid fa-xmark fa-fw",onClick:t=>t.close()}]})}static light(t,n="Important"){return new r({title:n,content:t,color:e.light,actions:[{title:"Close",color:o.light,icon:"fa-solid fa-xmark fa-fw",onClick:t=>t.close()}]})}static primary(t,n="Important"){return new r({title:n,content:t,color:e.primary,actions:[{title:"Close",color:o.primary,icon:"fa-solid fa-xmark fa-fw",onClick:t=>t.close()}]})}static secondary(t,n="Important"){return new r({title:n,content:t,color:e.secondary,actions:[{title:"Close",color:o.secondary,icon:"fa-solid fa-xmark fa-fw",onClick:t=>t.close()}]})}static success(t,n="Important"){return new r({title:n,content:t,color:e.success,actions:[{title:"Close",color:o.success,icon:"fa-solid fa-xmark fa-fw",onClick:t=>t.close()}]})}static warning(t,n="Important"){return new r({title:n,content:t,color:e.warning,actions:[{title:"Close",color:o.warning,icon:"fa-solid fa-xmark fa-fw",onClick:t=>t.close()}]})}#r(){let t=null;return this.#n.displayContent&&(this.#n.content instanceof HTMLElement?(t=this.#t.parseFromString('\n                    <div class="modal-body"></div>\n                ',"text/html").body.firstChild,t.append(this.#n.content)):t=this.#t.parseFromString(`\n                    <div class="modal-body">\n                        ${this.#n.content}\n                    </div>\n                `,"text/html").body.firstChild),t}#s(){let n=null;if(this.#n.displayFooter){const e=[];for(let n=0;n<this.#n.actions.length;n++){const o=t.deepExtend(i,this.#n.actions[n]),r=null!=o.icon&&""!==o.icon.trim()?`\n                    <span class="${o.icon}"></span>\n                `:"",s=this.#t.parseFromString(`\n                    <button type="button" class="btn ${o.color}">\n                        ${r}\n                        ${o.title}\n                    </button>\n                `,"text/html").body.firstChild,l=o.onClick;s.addEventListener("click",(()=>l(this))),e.push(s)}if(e.length>0){n=this.#t.parseFromString('\n                    <div class="modal-footer"></div>\n                ',"text/html").body.firstChild;for(let t=0;t<e.length;t++){const o=e[t];n.append(o)}}}return n}#i(){let t=null;if(this.#n.displayHeader&&(t=this.#t.parseFromString(`\n                <div class="modal-header ${this.#n.color}">\n                    <h5>${this.#n.title}</h5>\n                </div>\n            `,"text/html").body.firstChild,this.#n.closeButton)){const n=this.#t.parseFromString('\n                    <span class="fa-solid fa-xmark fa-fw"></span>\n                ',"text/html").body.firstChild;n.addEventListener("click",(()=>this.close())),t.append(n)}return t}#l(t,n,e){const o=this.#t.parseFromString(`\n            <div>\n                <style scoped>\n                    .modal-header, .modal-footer {\n                        padding: 0.5rem 1rem;\n                    }\n\n                    .modal-header h5 {\n                        padding: 0;\n                        margin: 0;\n                    }\n\n                    .modal-header span {\n                        position: absolute;\n                        right: 1rem;\n                        font-size: 1.2rem;\n                        cursor: pointer;\n                    }\n\n                    .modal-footer button {\n                        margin: 0 2pt;\n                    }\n                </style>\n                <div class="modal shadow ${this.#n.size}" tabindex="-1">\n                    <div class="modal-dialog">\n                        <div class="modal-content"></div>\n                    </div>\n                </div>\n            </div>\n        `,"text/html").body.firstChild;return null!=t&&o.querySelector(".modal-content").append(t),null!=n&&o.querySelector(".modal-content").append(n),null!=e&&o.querySelector(".modal-content").append(e),o}close(){this.#n.onClosing(this),null!=this.#o&&(this.#o.hide(),this.#o.dispose(),this.#o=null),null!=this.#e&&(this.#e.remove(),this.#e=null),this.#n.onClosed(this)}getElement(){return this.#e}getModal(){return this.#o}getModal(){return this.#o}}export{i as MODAL_ACTION,o as MODAL_ACTION_COLOR,e as MODAL_COLOR,n as MODAL_SIZE,r as default};
